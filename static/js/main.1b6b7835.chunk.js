(window["webpackJsonpmap-drawing-tool"]=window["webpackJsonpmap-drawing-tool"]||[]).push([[0],{15:function(e,t,r){e.exports=r(27)},20:function(e,t,r){},21:function(e,t,r){},27:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(6),c=r.n(o),i=(r(20),r(21),r(5)),l=r(1),d=r(8),s=r(3);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(r,!0).forEach(function(t){Object(s.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var y={mapSize:{},circle:{center:{x:300,y:300},radius:200},polygon:{points:[{x:400,y:100},{x:700,y:100},{x:700,y:500},{x:400,y:500}]}},E=function(e){return Math.PI*Math.pow(e.map.circle.radius,2)},w=function(e){for(var t=e.map.polygon.points,r=0,n=0;n<t.length;n++){var a=(n+1)%t.length;r+=(t[n].x+t[a].x)*(t[n].y-t[a].y)}return r<0?-r/2:r/2},O=function(e){for(var t=e.map.mapSize.width,r=e.map.mapSize.height,n=0,a=e.map.circle,o=0;o<t-1;o++)for(var c=0;c<r-1;c++){if(f(o,c,a.center.x,a.center.y,a.radius))m(e.map.polygon.points,o,c)&&n++}return n},m=function(e,t,r){var n,a,o=!1;for(n=0,a=e.length-1;n<e.length;a=n++)e[n].y>r!==e[a].y>r&&t<(e[a].x-e[n].x)*(r-e[n].y)/(e[a].y-e[n].y)+e[n].x&&(o=!o);return o},f=function(e,t,r,n,a){return(e-r)*(e-r)+(t-n)*(t-n)<=a*a},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CIRCLE_CENTER":return u({},e,{circle:u({},e.circle,{center:{x:t.x,y:t.y}})});case"SET_CIRCLE_RADIUS":return u({},e,{circle:u({},e.circle,{radius:t.r})});case"ADD_POLYGON_POINT":return u({},e,{polygon:u({},e.polygon,{points:[].concat(Object(d.a)(e.polygon.points),[t.payload])})});case"CLEAR_POLYGON":return u({},e,{polygon:u({},e.polygon,{points:[]})});case"CLEAR_CIRCLE":return u({},e,{circle:u({},e.circle,{radius:0})});case"SET_MAP_SIZE":return u({},e,{mapSize:t.payload});default:return e}},g=Object(l.b)(function(e){return{circleArea:E(e),polygonArea:w(e),interArea:O(e)}},{clearCircle:function(){return{type:"CLEAR_CIRCLE"}},clearPolygon:function(){return{type:"CLEAR_POLYGON"}}})(function(e){return a.a.createElement("div",{className:"panel"},a.a.createElement("div",{className:"buttons"},a.a.createElement("div",null,a.a.createElement("button",{onClick:function(){e.drawMode===e.drawModes.SET_CIRCLE_RADIUS&&e.clearCircle(),e.clearPolygon(),e.setDrawMode(e.drawModes.SET_POLYGON_POINT)}},"Draw polygon")),a.a.createElement("div",null,a.a.createElement("button",{onClick:function(){e.drawMode===e.drawModes.SET_POLYGON_POINT&&e.clearPolygon(),e.clearCircle(),e.setDrawMode(e.drawModes.SET_CIRCLE_CENTER)}},"Draw Circle")),a.a.createElement("div",null,a.a.createElement("button",{onClick:function(){e.setDrawMode(e.drawModes.OFF),e.clearPolygon(),e.clearCircle()}},"Clear field"))),a.a.createElement("div",{className:"area"},a.a.createElement("div",null,"Circle area: ",a.a.createElement("div",null,Math.round(e.circleArea),"px")),a.a.createElement("div",null,"Polygon area: ",a.a.createElement("div",null,Math.round(e.polygonArea),"px")),a.a.createElement("div",null,"Common area: ",a.a.createElement("div",null,e.interArea,"px"))))});function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(r,!0).forEach(function(t){Object(s.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var h=Object(l.b)(function(e){return{mapSize:e.map.mapSize,circle:e.map.circle,polygon:e.map.polygon}},{setCircleRadius:function(e){return{type:"SET_CIRCLE_RADIUS",r:e}},setCircleCenter:function(e,t){return{type:"SET_CIRCLE_CENTER",x:e,y:t}},addPolygonPoint:function(e){return{type:"ADD_POLYGON_POINT",payload:e}}})(function(e){var t=Object(n.useState)({x:0,y:0}),r=Object(i.a)(t,2),o=r[0],c=r[1],l=Object(n.useState)({x:0,y:0}),d=Object(i.a)(l,2),s=d[0],p=d[1],u=e.polygon.points.reduce(function(e,t){return e.push("".concat(t.x,",").concat(t.y)),e},[]);e.drawMode===e.drawModes.SET_POLYGON_POINT&&u.push("".concat(s.x,",").concat(s.y));return a.a.createElement("svg",{width:"".concat(e.mapSize.width,"px"),height:"".concat(e.mapSize.height-4,"px"),onClick:function(t){switch(e.drawMode){case e.drawModes.SET_CIRCLE_CENTER:e.setCircleCenter(t.clientX,t.clientY),e.setDrawMode(e.drawModes.SET_CIRCLE_RADIUS);break;case e.drawModes.SET_CIRCLE_RADIUS:e.setDrawMode(e.drawModes.OFF);break;case e.drawModes.SET_POLYGON_POINT:e.addPolygonPoint({x:t.clientX,y:t.clientY})}},onMouseMove:function(t){if(c({x:t.clientX,y:t.clientY}),e.drawMode===e.drawModes.SET_CIRCLE_RADIUS){var r=e.circle.center.x,n=e.circle.center.y,a=Math.sqrt(Math.pow(o.x-r,2)+Math.pow(o.y-n,2));e.setCircleRadius(a)}else e.drawMode===e.drawModes.SET_POLYGON_POINT&&p({x:t.clientX,y:t.clientY})}},a.a.createElement("circle",{className:"circle",cx:e.circle.center.x,cy:e.circle.center.y,r:e.circle.radius,style:S({},e.drawMode===e.drawModes.SET_CIRCLE_RADIUS&&{strokeDasharray:"4"})}),e.drawMode===e.drawModes.SET_CIRCLE_RADIUS&&a.a.createElement("text",{x:o.x+20,y:o.y+20},"r = ",Math.round(e.circle.radius)),a.a.createElement("polygon",{className:"polygon",points:u.join(" "),style:S({},e.drawMode===e.drawModes.SET_POLYGON_POINT&&{strokeDasharray:"4"})}),e.polygon.points[2]&&e.drawMode===e.drawModes.SET_POLYGON_POINT&&a.a.createElement("circle",{onClick:function(t){t.stopPropagation(),e.setDrawMode(e.drawModes.OFF)},cx:e.polygon.points[0].x,cy:e.polygon.points[0].y,r:7,style:{fill:"red",fillOpacity:"0.8",cursor:"pointer"}}))}),M={OFF:"OFF",SET_CIRCLE_CENTER:"SET_CIRCLE_CENTER",SET_CIRCLE_RADIUS:"SET_CIRCLE_RADIUS",SET_POLYGON_POINT:"SET_POLYGON_POINT"};var b=Object(l.b)(function(e){return{mapSize:e.map.mapSize}},{})(function(e){var t=Object(n.useState)(M.OFF),r=Object(i.a)(t,2),o=r[0],c=r[1];return a.a.createElement("div",{className:"map",style:{width:"".concat(e.mapSize.width,"px"),height:"".concat(e.mapSize.height,"px")}},a.a.createElement(g,{drawModes:M,drawMode:o,setDrawMode:c}),a.a.createElement(h,{drawModes:M,drawMode:o,setDrawMode:c}))});var P=Object(l.b)(null,{setMapSize:function(e){return{type:"SET_MAP_SIZE",payload:e}}})(function(e){e.setMapSize({width:window.innerWidth,height:window.innerHeight});var t=function(){e.setMapSize({width:window.innerWidth,height:window.innerHeight})};return Object(n.useEffect)(function(){window.addEventListener("resize",t)}),a.a.createElement("div",{className:"App"},a.a.createElement(b,null))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var v=r(7),T=r(14),I=Object(T.a)({map:C}),R=Object(v.b)(I);c.a.render(a.a.createElement(l.a,{store:R},a.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[15,1,2]]]);
//# sourceMappingURL=main.1b6b7835.chunk.js.map